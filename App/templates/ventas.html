{% extends "base.html" %}
{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='ventas.css') }}">
{% endblock %}
{% block contenido %}
<h2>Registrar Venta</h2>
<form method="POST" class="form-venta">
    <select name="producto_id" required>
    <option value="">Seleccionar producto</option>
    {% for p in productos %}
    <option value="{{ p.id }}" data-precio="{{ p.precio }}">
        {{ p.nombre }}
    </option>
    
    {% endfor %}
</select>
    <input type="number" step="0.01" name="precio_venta"
           placeholder="Precio de venta" required>
     <input type="number" step="0.01" name="data-precio"
           placeholder="Precio de producto" required>
    <input type="number" name="piezas" value="1" min="1"
           placeholder="Piezas vendidas" required>
    <input type="text" name="comentarios"
           placeholder="Comentarios">
    <button type="submit"><i class="fa-solid fa-check"></i> Registrar</button>
</form>
<hr>
<h2>Resumen</h2>
<div class="cards-resumen">
    <div class="card-total">
        <h3><i class="fa-solid fa-dollar-sign"></i> Total Ventas</h3>
        <p>${{ total_ventas }}</p>
    </div>
    <div class="card-total">
        <h3><i class="fa-solid fa-chart-line"></i> Total Utilidad</h3>
        <p>${{ total_utilidad }}</p>
    </div>
</div>
<hr>
<h2>Ventas Registradas</h2>
<table>
    <tr>
        <th>Producto</th>
        <th>Piezas</th>
        <th>Compra</th>
        <th>Venta</th>
        <th>Utilidad</th>
        <th>Fecha</th>
        <th>Acciones</th>
    </tr>
    {% for v in ventas %}
    <tr>
        <td>{{ v.nombre }}</td>
        <td>{{ v.piezas }}</td>
        <td>${{ v.precio_compra }}</td>
        <td>${{ v.precio_venta }}</td>
        <td>${{ v.utilidad }}</td>
        <td>{{ v.fecha }}</td>
        <td class="acciones">
            <a href="/ventas/editar/{{ v.id }}" class="btn-icon btn-editar" title="Editar">
                <i class="fa-solid fa-pen-to-square"></i>
            </a>
            <a href="/ventas/eliminar/{{ v.id }}" class="btn-icon btn-eliminar" 
               onclick="return confirm('Â¿Eliminar esta venta?')" title="Eliminar">
                <i class="fa-solid fa-trash-can"></i>
            </a>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}

